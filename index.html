<!DOCTYPE html>
<html lang="bn">
<head>
    <script>(function(s){s.dataset.zone='10432505',s.src='https://nap5k.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script>(function(s){s.dataset.zone='10432509',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script src='//libtl.com/sdk.js' data-zone='10346520' data-sdk='show_10346520'></script>
    <meta name="monetag" content="ba7f6903d1cbdce61c183385b3356e1b">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viral Bot Store - Premium Portal</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    
    <style>
        :root { 
            --primary: #581c87; 
            --accent: linear-gradient(135deg, #6d28d9, #4f46e5); 
            --bg: #020617; 
            --card-bg: #0f172a; 
            --white: #ffffff; 
            --text-main: #f8fafc; 
            --text-dim: #94a3b8; 
            --input-bg: #1e293b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg); color: var(--text-main); font-family: 'BUILT TITLING BD', sans-serif; }
        [lang="bn"], .bn-text { font-family: 'Li Ador Noirrit Bold', sans-serif; }

        .sticky-top-container { position: sticky; top: 0; z-index: 1000; background: var(--bg); border-bottom: 2px solid var(--primary); }
        .banner-header { width: 100%; height: auto; display: block; }
        
        .social-bar { background: rgba(30, 41, 59, 0.5); margin: 10px 15px 5px 15px; padding: 12px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(88, 28, 135, 0.3); }
        .social-icons { display: flex; gap: 25px; }
        .social-icons a { color: var(--white); font-size: 20px; text-decoration: none; }

        .search-container { padding: 10px 15px; max-width: 600px; margin: 0 auto; }
        .search-box input { width: 100%; padding: 12px 20px; border-radius: 12px; border: 1px solid var(--primary); background: var(--input-bg); color: white; outline: none; font-family: 'Li Ador Noirrit Bold', sans-serif; }

        .content-section { display: none; padding: 15px; padding-bottom: 120px; max-width: 600px; margin: 0 auto; }
        .content-section.active { display: block; }

        .v-card { background: var(--card-bg); border-radius: 20px; overflow: hidden; margin-bottom: 25px; border: 1px solid #1e293b; transition: 0.4s; }
        .v-card.highlight { border: 2px solid #a78bfa; box-shadow: 0 0 20px #6d28d9; }
        
        /* Thumbnail Logic - Back to Original */
        .v-thumb { width: 100%; aspect-ratio: 16/9; position: relative; background: #000; overflow: hidden; cursor: pointer; }
        .shorts-card .v-thumb { aspect-ratio: 9/16; }
        .image-card .v-thumb { aspect-ratio: auto; min-height: 200px; } 

        .v-thumb img { width: 100%; height: 100%; object-fit: cover; display: none; } /* শুরুতে হাইড থাকবে */
        .v-thumb.revealed img { display: block !important; } /* রিভিল হলে শো করবে */
        
        .action-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.7); z-index: 4; }
        .v-thumb.revealed .action-overlay { display: none !important; }
        
        .badge { position: absolute; top: 12px; left: 12px; background: var(--accent); color: white; padding: 5px 12px; border-radius: 8px; font-size: 10px; z-index: 5; }
        
        .btn-main { width: 100%; padding: 15px; border: none; border-radius: 12px; background: var(--accent); color: white; font-weight: 800; cursor: pointer; margin-bottom: 10px; text-transform: uppercase; }
        .btn-share { width: 100%; padding: 10px; border: 1px dashed #6d28d9; border-radius: 10px; background: rgba(109, 40, 217, 0.1); color: #a78bfa; font-size: 13px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: 'Li Ador Noirrit Bold', sans-serif; }

        .nav-wrapper { position: fixed; bottom: 20px; left: 5%; right: 5%; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(15px); border-radius: 20px; border: 1px solid var(--primary); z-index: 1000; }
        .bottom-nav { display: grid; grid-template-columns: 1fr 1fr 1fr; padding: 10px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--text-dim); cursor: pointer; font-size: 11px; }
        .nav-item.active { color: #a78bfa; }
    </style>
</head>
<body>

    <div class="sticky-top-container">
        <img src="https://i.postimg.cc/FswJ4vdD/IMG-20260107-051613.jpg" alt="Banner" class="banner-header">
        <div class="social-bar">
            <span>Community</span>
            <div class="social-icons">
                <a id="fb-link" href="#" target="_blank"><i class="fab fa-facebook-f"></i></a>
                <a id="tg-link" href="#" target="_blank"><i class="fab fa-telegram-plane"></i></a>
                <a id="wa-link" href="#" target="_blank"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>
        <div class="search-container">
            <div class="search-box"><input type="text" id="searchInput" placeholder="সার্চ করুন..." oninput="searchContent()"></div>
        </div>
    </div>

    <section id="video" class="content-section active"><div id="video-list"></div></section>
    <section id="image" class="content-section"><div id="image-list"></div></section>
    <section id="short-film" class="content-section"><div id="short-film-list"></div></section>

    <div class="nav-wrapper">
        <nav class="bottom-nav">
            <div class="nav-item active" data-cat="video" onclick="tab('video', this)"><i class="fa-solid fa-bolt"></i><span>Video</span></div>
            <div class="nav-item" data-cat="image" onclick="tab('image', this)"><i class="fa-solid fa-images"></i><span>Image</span></div>
            <div class="nav-item" data-cat="short-film" onclick="tab('short-film', this)"><i class="fa-solid fa-clapperboard"></i><span>Shorts</span></div>
        </nav>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyByCC_vYgY_vA92s6OHDbKhbkTqnycYb5Q",
            authDomain: "stream-vibe-b4900.firebaseapp.com",
            databaseURL: "https://stream-vibe-b4900-default-rtdb.firebaseio.com",
            projectId: "stream-vibe-b4900",
            storageBucket: "stream-vibe-b4900.firebasestorage.app",
            messagingSenderId: "997470087286",
            appId: "1:997470087286:web:3ba3facca244c2c6651757"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let isInitialLoad = true;

        db.ref('socialLinks').on('value', snap => {
            const l = snap.val();
            if(l){
                document.getElementById('fb-link').href = l.fb || "#";
                document.getElementById('tg-link').href = l.tg || "#";
                document.getElementById('wa-link').href = l.wa || "#";
            }
        });

        function tab(id, el) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(el) el.classList.add('active');
            loadData(id);
        }

        function loadData(category) {
            db.ref('contents').orderByChild('category').equalTo(category).on('value', snapshot => {
                const list = document.getElementById(`${category}-list`);
                let items = [];
                snapshot.forEach(child => { items.push({ id: child.key, ...child.val() }); });
                renderUI(items.reverse(), list, category);
                
                if(isInitialLoad) {
                    handleDeepLink();
                }
            });
        }

        function renderUI(data, container, category) {
            let html = '';
            data.forEach(item => {
                const id = item.id;
                let cardClass = "v-card";
                if(category === 'short-film') cardClass += " shorts-card";
                if(category === 'image') cardClass += " image-card";
                
                html += `
                <div class="${cardClass}" id="card-${id}" data-title="${item.title.toLowerCase()}">
                    <div class="v-thumb" id="t-${id}" onclick="window.open('https://otieu.com/4/10346483', '_blank')">
                        <span class="badge">${item.tag}</span>
                        <img src="${item.thumb}">
                        <div class="action-overlay"><i class="fa fa-play-circle" style="font-size:50px; color:white;"></i></div>
                    </div>
                    <div class="v-info" style="padding:15px;">
                        <h3 class="bn-text">${item.title}</h3>
                        <p style="font-size:12px; color:var(--text-dim); margin: 8px 0;">Views: ${item.views || 0}</p>
                        <button class="btn-main" id="b-${id}" onclick="initAction('${id}', '${category}', '${item.contentLink}', ${item.adsCount})">Show Content</button>
                        <div class="btn-share" onclick="shareNow('${item.title}', '${id}', '${category}')">
                            <i class="fa-solid fa-share-nodes"></i> Share Content Link
                        </div>
                    </div>
                </div>`;
            });
            container.innerHTML = html;
        }

        function shareNow(title, id, cat) {
            const url = window.location.origin + window.location.pathname + `?id=${id}&cat=${cat}`;
            if (navigator.share) {
                navigator.share({ title: title, url: url }).catch(console.error);
            } else {
                navigator.clipboard.writeText(url);
                alert("লিঙ্ক কপি হয়েছে!");
            }
        }

        function handleDeepLink() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            const cat = params.get('cat');

            if (id && cat) {
                isInitialLoad = false;
                const targetNav = document.querySelector(`.nav-item[data-cat="${cat}"]`);
                if (targetNav) {
                    tab(cat, targetNav);
                }
                setTimeout(() => {
                    const el = document.getElementById(`card-${id}`);
                    if (el) {
                        el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        el.classList.add('highlight');
                        setTimeout(() => el.classList.remove('highlight'), 3500);
                    }
                }, 1200);
            }
        }

        let currentClickCount = {};
        let isRevealed = {};

        function initAction(id, type, link, ads) {
            const thumb = document.getElementById(`t-${id}`);
            const btn = document.getElementById(`b-${id}`);
            
            // Thumbnail Reveal Logic - Original
            if (!isRevealed[id]) {
                thumb.classList.add('revealed');
                isRevealed[id] = true;
                btn.innerText = "Unlock Full Content";
                return;
            }

            if (!currentClickCount[id]) currentClickCount[id] = 0;
            if (currentClickCount[id] < ads) {
                if (typeof show_10346520 === 'function') {
                    show_10346520().then(() => {
                        currentClickCount[id]++;
                        updateBtn(id, ads, type);
                    }).catch(() => {
                        currentClickCount[id]++;
                        updateBtn(id, ads, type);
                    });
                } else {
                    currentClickCount[id]++;
                    updateBtn(id, ads, type);
                }
            } else {
                db.ref('contents/' + id + '/views').transaction(v => (v || 0) + 1);
                window.location.href = link; 
            }
        }

        function updateBtn(id, ads, type) {
            const btn = document.getElementById(`b-${id}`);
            let rem = ads - currentClickCount[id];
            if(rem > 0) btn.innerText = `Unlock in ${rem} Ads`;
            else btn.innerText = (type === 'image' ? "View Image" : "Watch Now");
        }

        function searchContent() {
            let input = document.getElementById('searchInput').value.toLowerCase();
            let cards = document.getElementsByClassName('v-card');
            for (let i = 0; i < cards.length; i++) {
                let title = cards[i].getAttribute('data-title');
                cards[i].style.display = title.includes(input) ? "block" : "none";
            }
        }

        loadData('video');
    </script>
</body>
</html>
